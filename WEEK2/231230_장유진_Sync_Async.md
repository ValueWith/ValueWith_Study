# ë™ê¸°(**Synchronous)ì™€ ë¹„ë™ê¸°(Asynchronous)ë€?**

ë™ê¸°ëŠ” **ì§ë ¬ì (ìˆœì°¨ì )**ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ìš”ì²­ì„ ë³´ë‚´ë©´ í•´ë‹¹ ìš”ì²­ì´ ì™„ë£Œëœ í›„ ë‹¤ìŒ ë™ì‘ì„ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ë¹„ë™ê¸°ëŠ” **ë³‘ë ¬ì **ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ìš”ì²­ì„ ë³´ë‚´ë©´ ì‘ë‹µê³¼ ê´€ê³„ ì—†ì´ ë‹¤ìŒ ë™ì‘ì„ ì‹¤í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

# ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë¹„ë™ê¸° ì²˜ë¦¬

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ëŒì•„ê°€ëŠ” ì–¸ì–´ì´ê¸° ë•Œë¬¸ì— í•œ ë²ˆì— í•œ ì‘ì—…ë§Œ, í•˜ë‚˜ì˜ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì‘ì—…ì€ ì•ì„  ì‘ì—…ì´ ëë‚˜ì•¼ ìˆ˜í–‰ë©ë‹ˆë‹¤. ì¦‰, ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” **ë™ê¸°ì‹ ì–¸ì–´**ì…ë‹ˆë‹¤.

í•˜ì§€ë§Œ ë°ì´í„° ìš”ì²­ì´ë‚˜ íƒ€ì´ë¨¸ ë“± ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ì‘ì—…ì„ ì²˜ë¦¬í•  ë•Œì—ë„ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ë°ì´í„°ê°€ ë¶ˆëŸ¬ì™€ì§€ëŠ” ë™ì•ˆ ì‚¬ìš©ìëŠ” ë²„íŠ¼ì„ í´ë¦­í•˜ëŠ” ë“± ì–´ë– í•œ ì•¡ì…˜ì„ ì·¨í•´ë„ ì•„ë¬´ ë°˜ì‘ì—†ëŠ” í™”ë©´ì„ ë§ˆì£¼í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„° ìš”ì²­ì´ë‚˜ íƒ€ì´ë¨¸ì™€ ê°™ì€ ì‘ì—…ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜í–‰í•˜ê³ , ê·¸ ë™ì•ˆì—ë„ ë‹¤ë¥¸ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(ë¹„ë™ê¸°ë¡œ ì‘ë™í•˜ëŠ” ì½”ë“œë“¤ â†’ Ajax, EventListner, setTimeout ë“±)

í•˜ì§€ë§Œ ë¹„ë™ê¸°ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ê²½ìš° ì½”ë“œì˜ ë™ì‘ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê³ , ì˜ë„ì™€ ë‹¤ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆì‹œ ì½”ë“œë¥¼ í•˜ë‚˜ ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
console.log('1'); // 1

setTimeout(() => {
  console.log('2');
}, 2000);

console.log('3'); // 3
```

ìœ„ ì½”ë“œì—ì„œ ê¸°ëŒ€í•˜ëŠ” ì‘ë™ ë°©ì‹ì€ consoleì— 1, 2, 3ì´ ìˆœì„œëŒ€ë¡œ ì°íˆëŠ” ê²ƒì´ì§€ë§Œ, ì‹¤ì œë¡œ console.logì—ì„œëŠ” 1, 3, 2ì˜ ìˆœì„œëŒ€ë¡œ ì°íˆê²Œ ë©ë‹ˆë‹¤.

setTimeoutì´ ë¹„ë™ê¸°ë¡œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €(ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„)ê°€ setTimeoutì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ console.log(â€™3â€™)ì„ ì‹¤í–‰ì‹œí‚¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, ì¦‰ ë¹„ë™ê¸° ì‘ì—…ì—ì„œ ìˆœì„œë¥¼ ë³´ì¥í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë™ì‘ì„ ìœ„í•´ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì½œë°± í•¨ìˆ˜, Promise, async/await ì„¸ ê°€ì§€ íŒ¨í„´ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.

## ì½œë°±(Call back) í•¨ìˆ˜

ë‹¤ë¥¸ í•¨ìˆ˜ì— íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì§€ëŠ” í•¨ìˆ˜ë¥¼ ì½œë°± í•¨ìˆ˜ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´ ê°€ì¥ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´ìœ¼ë¡œ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œëœ í›„ì— í˜¸ì¶œë˜ì–´ ì‹¤í–‰ ìˆœì„œë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

```jsx
console.log('1');

const setTimeoutWithCallback = (callbackFunc) => {
  setTimeout(() => {
    console.log('2');
    callbackFunc();
  }, 1000);
};

setTimeoutWithCallback(() => console.log('3'));
```

### **ğŸ”¥Â ì½œë°± ì§€ì˜¥ê³¼ íŒŒë©¸ì˜ í”¼ë¼ë¯¸ë“œ**

ì½”ë“œ ìˆœì„œë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ ì½œë°± í•¨ìˆ˜ë¥¼ ì¤‘ì²©í•´ì„œ êµ¬í˜„í•˜ëŠ” ê²½ìš° ì½”ë“œ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³  ì´í•´í•˜ê¸°ë„ ì–´ë ¤ì›Œì§€ëŠ”ë° ì´ë¥¼ ì½œë°± ì§€ì˜¥(callback hell) ë˜ëŠ” íŒŒë©¸ì˜ í”¼ë¼ë¯¸ë“œ(Pyramid of Doom)ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Promiseì™€ async/awaitì™€ ê°™ì€ íŒ¨í„´ì´ ë„ì…ë˜ì—ˆìŠµë‹ˆë‹¤.

## Promise

ì½œë°± ì§€ì˜¥ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ES6ì—ì„œ ì¶”ê°€ëœ ë¬¸ë²•ì…ë‹ˆë‹¤.

Promise ê°ì²´ëŠ” ë¹„ë™ê¸° ì‘ì—…ì˜ ê²°ê³¼ì™€ ìƒíƒœë¥¼ ë°˜í™˜í•˜ê³ . ê° ìƒíƒœì— ë”°ë¥¸ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

Promise ê°ì²´ê°€ ê°€ì§„ ìƒíƒœ(state) 3ê°€ì§€

- ëŒ€ê¸°(Pending): ë¹„ë™ê¸° ì‘ì—…ì´ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì€ ì´ˆê¸° ìƒíƒœ
- ì´í–‰(Fulfilled): ë¹„ë™ê¸° ì‘ì—…ì´ ì„±ê³µí•œ ìƒíƒœ
- ê±°ë¶€(Rejected): ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤íŒ¨í•œ ìƒíƒœ

### í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ìƒì„±

```jsx
function asyncFunc() {
  return new Promise((resolve) => {
    // ìƒì„±ì í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜ë¥¼ ìƒì„±ì(executor)ë¼ê³  í•©ë‹ˆë‹¤.
    // ìƒì„±ì í•¨ìˆ˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë  ë•Œ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    // ì´ ì½”ë“œì—ì„œ ìƒì„±ì í•¨ìˆ˜ëŠ” setTimeout í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ 1ì´ˆ í›„ì— ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

    setTimeout(() => {
      // ë¹„ë™ê¸° ì‘ì—…ì´ ì„±ê³µí–ˆì„ ë•ŒëŠ” resolve()ë¥¼ í˜¸ì¶œí•˜ì—¬ ê²°ê³¼ ê°’ì„ í•¨ê»˜ ì „ë‹¬í•©ë‹ˆë‹¤.
      resolve('async function');
    }, 1000);

    // ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤íŒ¨í–ˆì„ ë•ŒëŠ” reject()ë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹¤íŒ¨ ì´ìœ ë¥¼ í•¨ê»˜ ì „ë‹¬í•©ë‹ˆë‹¤.
    // reject('error');
  });
}
```

```jsx
asyncFunc()
  .then((value) => {
    // ê²°ê³¼ê°€ fulfilled, ì¦‰ ë¹„ë™ê¸° ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜í–‰í–ˆì„ ë•Œ ì‹¤í–‰ë  ì½”ë“œ
    // promiseì—ì„œ ë°˜í™˜ëœ resolve()ì˜ ê²°ê³¼ê°’ì´ ì¸ìë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
    console.log('Data: ', value);
  })
  .catch((error) => {
    // ê²°ê³¼ê°€ rejected, ì¦‰ ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì‹¤í–‰ë  ì½”ë“œ
    // promiseì—ì„œ ë°˜í™˜ëœ reject()ì˜ ê²°ê³¼ê°’ì´ ì¸ìë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
    console.error(error);
  });
```

### í”„ë¡œë¯¸ìŠ¤ **ì²´ì´ë‹,** then() ê·¸ë¦¬ê³  catch()

í”„ë¡œë¯¸ìŠ¤ ê°ì²´ëŠ” .then() / .catch()ì˜ ë©”ì„œë“œ ì²´ì´ë‹ì„ í†µí•´ í›„ì† ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

then() ë©”ì„œë“œì—ì„œ ë°˜í™˜í•˜ëŠ” ê°’ì€ Promise ê°ì²´ë¡œ, ê²°ê³¼ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì´í–‰ / ê±°ë¶€ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„±ì„ ì´ìš©í•´ ì´ì „ Promise ê°ì²´ì˜ ê°’ì„ ì´ì–´ë°›ì•„ ìˆœì°¨ì ìœ¼ë¡œ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
asyncFunc()
  .then((resultFromA) => b(resultFromA))
  .then((resultFromB) => c(resultFromB))
  .then((resultFromC) => console.log(resultFromC));
```

### fetch()

ì‹¤ì œë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ë•ŒëŠ” `Promise` ê°ì²´ë¥¼ ì§ì ‘ ì„ ì–¸í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ë‚´ì¥ëœ `Promise` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.

fetch()ëŠ” í˜¸ì¶œí•˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ì„ ë³´ë‚´ê³  Promiseë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

```jsx
fetch('https://jsonplaceholder.typicode.com/posts/1')
  .then((response) => response.json())
  .then((data) => console.log(data));
	.catch((error) => console.log(error));
```

í•˜ì§€ë§Œ Promiseì—ì„œë„ then() ì²´ì¸ì„ ê¸¸ê²Œ ì´ì–´ ë‚˜ê°€ë©´ ì½”ë“œì˜ ê°€ë…ì„±ì´ ë–¨ì–´ì§„ë‹¤ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.

## async / await

async / awaitëŠ” ES2017ì—ì„œ ì¶”ê°€ëœ ë¬¸ë²•ì…ë‹ˆë‹¤. ì¼ë°˜ì ì¸ ë™ê¸° ì½”ë“œì™€ ê°™ì€ ëª¨ì–‘ìœ¼ë¡œ ì‘ì„±ë˜ê¸° ë•Œë¬¸ì— ìœ„ì— ì†Œê°œí•œ ë‘ ê°€ì§€ ë°©ì‹ë³´ë‹¤ ì§ê´€ì ì´ê³  ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

### async

- ë¹„ë™ê¸° ë¡œì§ì„ í¬í•¨í•˜ëŠ” í•¨ìˆ˜ ì•ì— ë¶™ì´ëŠ” ì˜ˆì•½ì–´
- asyncê°€ ë¶™ì€ í•¨ìˆ˜ëŠ” Promise ê°ì²´ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.
- awaitì€ asnyc í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### await

- async í‚¤ì›Œë“œë¥¼ ë¶™ì¸ í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- Promise ê°ì²´ë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ í˜¸ì¶œ ì•ìª½ì—ë§Œ ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- await í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ë©´ ì½”ë“œëŠ” ì‹¤í–‰ì„ ë©ˆì¶”ê³ , await ë’¤ì— ì„ ì–¸ëœ Promise í•¨ìˆ˜ê°€ ì²˜ë¦¬ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

```jsx
// ì—ëŸ¬ ì²˜ë¦¬ëŠ” tryâ€¦catch êµ¬ë¬¸ì„ ì´ìš©í•´ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
const promiseFunc = async () => {
  try {
    // awaitì—ì„œ fulfilledë¥¼ ë°˜í™˜í•  ê²½ìš° ë°˜í™˜ëœ ê²°ê³¼ê°’ì„ resultì— í• ë‹¹
    const result = await asyncFunc();
  } catch (err) {
    // awaitì—ì„œ rejectedë¥¼ ë°˜í™˜í•  ê²½ìš° catch ì ˆë¡œ ì´ë™
    console.log(err);
  }
};

promiseFunc();
```
